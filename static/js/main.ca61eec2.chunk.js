(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{47:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){},51:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){},55:function(t,e,a){},56:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a.n(n),i=a(21),s=a.n(i),r=a(23),o=a(7),l=a.n(o),d=a(11),u=a(8),h=a(2),p=a(3),j=a(5),m=a(4),b=a(22),v=a.n(b).a.create({baseURL:"https://api.openweathermap.org/data/2.5",params:{appid:"6f2892500d8c51980b4cad6f03352cae",lang:window.navigator.language}}),f=(a(47),a(0));var O=function(){return Object(f.jsx)("div",{className:"loader",children:"Loading..."})},g=(a(49),a.p+"static/media/arrow.0342a3b8.svg"),y=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t,e=this.props.selected,a={weekday:"long",day:"numeric",month:"long",hour:"numeric",minute:"numeric",timeZone:e&&"Etc/GMT".concat(e.timezone>=0?"-":"+").concat(Math.abs(e.timezone/60/60))};return e&&"loading"!==e&&(t=[[1,"Humidity","".concat(e.main.humidity,"%")],[2,"Pressure","".concat(Math.round(.750062*e.main.pressure)," mmHg")],[3,"Wind","".concat(e.wind.speed," m/s")],[4,"Feels Like","".concat(Math.round(e.main.feels_like),"\xb0")]]),e?"loading"===e?Object(f.jsx)("div",{className:"content",children:Object(f.jsx)("div",{className:"weather",children:Object(f.jsx)(O,{})})}):Object(f.jsxs)("div",{className:"content",children:[Object(f.jsxs)("div",{className:"weather",children:[Object(f.jsxs)("div",{className:"weather__main",children:[Object(f.jsx)("h2",{className:"weather__city",children:e.name}),Object(f.jsx)("h4",{className:"weather__date",children:new Date(1e3*e.dt).toLocaleString(window.navigator.language,a)}),Object(f.jsx)("div",{className:"weather__temp",children:"".concat(Math.round(e.main.temp),"\xb0")}),Object(f.jsx)("div",{className:"weather__description",children:e.weather[0].description})]}),Object(f.jsxs)("div",{className:"weather__status",children:[Object(f.jsx)("div",{className:"icon",children:Object(f.jsx)("img",{src:e&&"http://openweathermap.org/img/wn/".concat(e.weather[0].icon,"@2x.png"),alt:""})}),Object(f.jsx)("div",{className:"weather__day-temp",children:"".concat(Math.round(e.main.temp_min),"\xb0/ ").concat(Math.round(e.main.temp_max),"\xb0")})]})]}),Object(f.jsx)("div",{className:"weather today",children:t.map((function(t){return Object(f.jsxs)("div",{className:"today__item",children:[Object(f.jsx)("div",{className:"today__item__title",children:t[1]}),Object(f.jsxs)("div",{className:"today__item__value",children:[3===t[0]&&Object(f.jsx)("div",{className:"wind-icon__wrap",children:Object(f.jsx)("img",{style:{transform:"rotate(".concat(e.wind.deg,"deg)")},src:g,alt:"",className:"wind-icon"})})," ",t[2]]})]},t[0])}))})]}):Object(f.jsx)("div",{className:"content",children:Object(f.jsx)("div",{className:"weather",children:Object(f.jsx)("div",{className:"weather__hello",children:"Welcome to Weather App! Please, search or select city to view information about weather"})})})}}]),a}(c.a.Component),x=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).onLocationClick=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.location){e.next=3;break}return e.next=3,t.props.getCurrentLocation();case 3:t.props.onSelect(t.props.location);case 4:case"end":return e.stop()}}),e)}))),t}return Object(p.a)(a,[{key:"render",value:function(){var t=this,e=this.props.location;return Object(f.jsx)("div",{className:"city__wrap",children:Object(f.jsxs)("button",{className:"city",onClick:function(){return t.onLocationClick()},children:[Object(f.jsxs)("h3",{className:"city__title",children:[Object(f.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(f.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Object(f.jsx)("path",{className:"city__location",d:"M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z",fill:"#fff"})]}),e?e.name:"Current Location"]}),Object(f.jsx)("div",{className:"city__temp",children:e?"".concat(Math.round(e.main.temp)," \xb0C"):""})]})})}}]),a}(c.a.Component),w=(a(50),a.p+"static/media/remove.8b670d78.svg"),_=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{className:"".concat(this.props.editable?"editable":""," city__wrap"),children:[Object(f.jsx)("button",{className:"city__delete",onClick:this.props.onDeleteClick,children:Object(f.jsx)("img",{src:w,alt:""})}),Object(f.jsxs)("button",{className:"city",onClick:function(){return t.props.onSelect(t.props.cityData)},children:[Object(f.jsx)("h3",{className:"city__title",children:this.props.city}),Object(f.jsx)("div",{className:"city__temp",children:"".concat(Math.round(this.props.cityData.main.temp)," \xb0C")})]})]})}}]),a}(c.a.Component),N=(a(51),function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={editable:!1},t}return Object(p.a)(a,[{key:"render",value:function(){var t=this,e=this.props.cities.map((function(e){return Object(f.jsx)(_,{editable:t.state.editable,city:e.name,cityData:e,onSelect:t.props.onSelect,onDeleteClick:function(){return t.props.onDeleteClick(e.id)}},e.id)}));return Object(f.jsxs)("div",{className:"cities",children:[Object(f.jsx)(x,{location:this.props.location,getCurrentLocation:this.props.getCurrentLocation,onSelect:this.props.onSelect}),e,e.length>0&&Object(f.jsx)("div",{className:"cities__edit",children:Object(f.jsx)("button",{className:"edit",onClick:function(){return t.setState({editable:!t.state.editable})},children:this.state.editable?"Finish":"Edit"})})]})}}]),a}(c.a.Component)),k=(a(52),function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={query:""},t}return Object(p.a)(a,[{key:"sumbitForm",value:function(t){t.preventDefault(),this.props.search(this.state.query),this.setState({query:""})}},{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{className:"sidebar ".concat(this.props.visible?"visible":""),children:[Object(f.jsx)("form",{onSubmit:function(e){return t.sumbitForm(e)},className:"sidebar__search",children:Object(f.jsx)("input",{className:"sidebar__search__input",type:"text",placeholder:"Search city",value:this.state.query,onChange:function(e){return t.setState({query:e.target.value})}})}),Object(f.jsx)(N,{location:this.props.location,getCurrentLocation:this.props.getCurrentLocation,cities:this.props.cities,onSelect:this.props.onSelect,onDeleteClick:this.props.onDeleteClick})]})}}]),a}(c.a.Component)),C=(a(53),a.p+"static/media/thunder_d.d9eb4d90.jpeg"),S=a.p+"static/media/thunder_n.f475965a.jpeg",L=a.p+"static/media/snow_d.fde299b1.jpeg",M=a.p+"static/media/snow_n.a28c7533.jpeg",D=a.p+"static/media/rain_d.7c487f74.jpeg",I=a.p+"static/media/rain_n.6db66877.jpeg",A=a.p+"static/media/mist_d.c16b997c.jpeg",q=a.p+"static/media/mist_n.4f62823a.jpeg",z=a.p+"static/media/clouds_d.e38f2a03.jpeg",P=a.p+"static/media/clouds_n.c0c9f27a.jpeg",E={Thunderstorm:{day:C,night:S},Drizzle:{day:D,night:I},Rain:{day:D,night:I},Snow:{day:L,night:M},Atmosphere:{day:A,night:q},Clear:{day:a.p+"static/media/clear_d.29cdc5ba.jpeg",night:a.p+"static/media/clear_n.65a47972.jpeg"},Clouds:{day:z,night:P}},F=(a(54),a(55),function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return Object(f.jsx)("button",{className:"menu-button ".concat(this.props.active),onClick:this.props.onMenuClick,children:Object(f.jsxs)("svg",{viewBox:"0 0 100 100",children:[Object(f.jsx)("path",{className:"line top",d:"m 70,33 h -40 c 0,0 -8.5,-0.149796 -8.5,8.5 0,8.649796 8.5,8.5 8.5,8.5 h 20 v -20"}),Object(f.jsx)("path",{className:"line middle",d:"m 70,50 h -40"}),Object(f.jsx)("path",{className:"line bottom",d:"m 30,67 h 40 c 0,0 8.5,0.149796 8.5,-8.5 0,-8.649796 -8.5,-8.5 -8.5,-8.5 h -20 v 20"})]})})}}]),a}(c.a.Component));function J(){return new Promise((function(t,e){navigator.geolocation.getCurrentPosition((function(e){t([e.coords.latitude,e.coords.longitude])}),(function(){return e(alert("Please, turn on geolocation"))}))}))}var W=function(t){Object(j.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={cities:[],citiesId:[],selected:null,bg:null,location:null,showSidebar:!1},t.search=function(){var e=Object(u.a)(l.a.mark((function e(a){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.get("/weather",{params:{q:a,units:"metric"}});case 3:if(n=e.sent,c=n.data,!t.state.citiesId.includes(c.id)){e.next=7;break}return e.abrupt("return");case 7:t.setState({cities:[].concat(Object(d.a)(t.state.cities),[c]),citiesId:[].concat(Object(d.a)(t.state.citiesId),[c.id])}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert("Error ".concat(e.t0.response.status,": We could not find this city"));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),t.getCurrentLocation=Object(u.a)(l.a.mark((function e(){var a,n,c,i,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({selected:"loading"}),e.next=3,J();case 3:return a=e.sent,n=Object(r.a)(a,2),c=n[0],i=n[1],e.next=9,v.get("/weather",{params:{lat:c,lon:i,units:"metric"}});case 9:s=e.sent,o=s.data,t.setState({selected:o,location:o,bg:E[o.weather[0].main][o.dt<o.sys.sunrise||o.dt>o.sys.sunset?"night":"day"]});case 12:case"end":return e.stop()}}),e)}))),t}return Object(p.a)(a,[{key:"onSelect",value:function(t){var e=E[t.weather[0].main]?E[t.weather[0].main][t.dt<t.sys.sunrise||t.dt>t.sys.sunset?"night":"day"]:E.Atmosphere[t.dt<t.sys.sunrise||t.dt>t.sys.sunset?"night":"day"];this.setState({selected:t,bg:e}),this.setState((function(t){return{showSidebar:!t.showSidebar}}))}},{key:"onDeleteClick",value:function(t){this.setState((function(e){var a=e.citiesId.slice(0),n=e.cities.slice(0);return{citiesId:a=a.filter((function(e){return e!==t})),cities:n=n.filter((function(e){return e.id!==t}))}}))}},{key:"onMenuClick",value:function(){this.setState((function(t){return{showSidebar:!t.showSidebar}}))}},{key:"componentDidMount",value:function(){var t=this,e=JSON.parse(localStorage.getItem("cities"));this.setState({citiesId:e||[]}),e&&e.map(function(){var e=Object(u.a)(l.a.mark((function e(a){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/weather",{params:{id:a,units:"metric"}});case 2:n=e.sent,c=n.data,t.setState({cities:[].concat(Object(d.a)(t.state.cities),[c])});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"componentDidUpdate",value:function(){localStorage.setItem("cities",JSON.stringify(this.state.citiesId))}},{key:"render",value:function(){var t=this,e=this.state.bg;return Object(f.jsxs)("div",{className:"app",children:[e&&Object(f.jsx)("img",{className:"bg",src:e,alt:"bg"}),Object(f.jsx)(F,{onMenuClick:function(){return t.onMenuClick()},active:this.state.showSidebar?"active":""}),Object(f.jsx)(k,{visible:this.state.showSidebar,search:function(e){return t.search(e)},cities:this.state.cities,onSelect:function(e){return t.onSelect(e)},location:this.state.location,getCurrentLocation:function(){return t.getCurrentLocation()},onDeleteClick:function(e){return t.onDeleteClick(e)}}),Object(f.jsx)(y,{selected:this.state.selected})]})}}]),a}(c.a.Component);s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(W,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.ca61eec2.chunk.js.map